{% load static %}

<!DOCTYPE html>
<html>
<head>
    <title>Forecast - Alert!</title>
    
    <link rel="stylesheet" type="text/css" href="{% static 'salidify/vendors/bootstrap/css/bootstrap.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'salidify/css/style.css' %}" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
	<script type="text/javascript" src="{% static 'salidify/vendors/jquery/jquery-3.3.1.min.js' %}"></script>

    <style>
        .card-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 100%;
            margin: 0 auto;
            padding: 9px;
        }

        .card {
            width: 90%;
            height: 350px;
            margin: 12px;
            border-color: #31A05E;
            border-width: 2px;
            border-radius: 16px;
            background-color: rgb(255, 255, 255);
        }

		a,
		a:link,
		a:visited,
		a:hover,
		a:active{
			text-decoration: none;
			color: black;
		}
    </style>
</head>
<body>
    <!-- top navbar with logo -->
	<nav class="navbar green">
		<a class="navbar-brand mx-auto" style="color: white;" href="#">
			<svg height="41" style="fill: white;" viewBox="0 0 64 64" width="41" xmlns="http://www.w3.org/2000/svg"><g id="Glyph"><path d="m7.879 23.457a79.677 79.677 0 0 0 6.371 8.543h1.729a25.744 25.744 0 0 0 -.927-3.683 27.189 27.189 0 0 0 -7.723-11.576l1.342-1.482a29.153 29.153 0 0 1 8.277 12.424c.264.787.481 1.594.674 2.409.09-.164.183-.326.262-.5 2.251-5 1.157-12.962-3.627-15.724a9.56 9.56 0 0 0 -7.5-.543 4.2 4.2 0 0 0 -2.646 2.044c-.531 1.341.927 3.695 3.768 8.088z"/><path d="m30.939 22.279a7.294 7.294 0 0 0 -.449-1.761c-1.559-3.956-6.109-6.161-8.835-5.349a4.346 4.346 0 0 0 -2.2 1.667 17 17 0 0 1 .582 12.747c.057-.07.125-.132.181-.2a18.6 18.6 0 0 0 3.79-9.489l1.988.218a20.483 20.483 0 0 1 -4.21 10.511c-.381.482-.8.935-1.228 1.38h4.612l.083-.039a7.959 7.959 0 0 1 5.688-9.682z"/><path d="m49.2 32h10.015a5.77 5.77 0 0 0 -2.567-2.064 7.322 7.322 0 0 0 -2.1-.38c-.918-.068-1.959-.146-2.441-1.109-.5-1.01.183-1.861.731-2.546a5.256 5.256 0 0 0 1.189-2.124c.494-2.155.5-5.772-1.516-6.906a3.919 3.919 0 0 0 -3.054-.216 6.2 6.2 0 0 0 -3.567 2.805c-.779 1.506-.324 3.176.116 4.789s.9 3.309-.312 4.473c-1.231 1.185-3.029.7-4.77.225a7.541 7.541 0 0 1 -.186 3.053h6.429c.25-1.416.532-2.834.859-4.229.56-2.384 1.242-4.77 2.027-7.091l1.894.64c-.764 2.261-1.428 4.586-1.973 6.909-.292 1.244-.545 2.508-.774 3.771z"/><path d="m38.654 32a5.826 5.826 0 0 0 .325-1.606l-1.663.554-.632-1.9 2.082-.694a6.01 6.01 0 0 0 -4.766-4.264v1.91h-2v-1.91a6.01 6.01 0 0 0 -4.432 3.379l1.748.583-.632 1.9-1.653-.552a6.026 6.026 0 0 0 -.031.6 5.886 5.886 0 0 0 .346 2zm-6.654-4h2v2h-2z"/><path d="m11.653 32q-1.678-2.044-3.231-4.216a15.985 15.985 0 0 0 -2.643 1.154 3.164 3.164 0 0 0 -1.575 1.5 2.727 2.727 0 0 0 -.156 1.562z"/><path d="m4.018 34a27.032 27.032 0 0 0 26.982 26h2a27.032 27.032 0 0 0 26.982-26zm16.547 20.9a27.157 27.157 0 0 1 -11.42-10.381l1.71-1.038a25.172 25.172 0 0 0 10.58 9.619zm4.435 1.1h-2v-2h2z"/><path d="m47 8v-2h-4a8 8 0 0 0 -8 8v2h4a8 8 0 0 0 8-8z"/><circle cx="28" cy="8" r="2"/><circle cx="15" cy="5" r="2"/></g></svg>
		</a>
	</nav>
    <!-- navbar with title + navigation -->
	<nav class="navbar p-5">
		<a class="navbar-brand" href="http://localhost:8000/salidify/">
			<svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 0 24 24" width="40px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none" opacity=".87"/><path d="M17.51 3.87L15.73 2.1 5.84 12l9.9 9.9 1.77-1.77L9.38 12l8.13-8.13z"/></svg>
		</a>
		<a class="navbar-brand green-text mx-auto" href="#">
			<h1>Similar Salads</h1>
		</a>
		<a class="navbar-brand" href="#">
			<svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 0 24 24" width="40px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"/></svg>
		</a>
	</nav>
    <div class="card-container"></div>
    
</body>
<script>
    var salads =[["Broccoli Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2019/02/Broccoli-Salad-2-500x500.jpg", "Combination of broccoli, bacon, red onion, cranberries, sunflower seeds, & goat cheese", ["1 broccoli head, approx 5 cups of florets", "8 slices bacon", "1/3 cup red onion, diced", "1/2 cup dried cranberries", "1/2 cup sunflower seeds", "1/4 cup goat cheese, crumbled"], ["BROCCOLI SALAD DRESSING"]],
				["Salmon Avocado Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2020/07/Salmon-Avocado-Salad-6-500x500.jpg", "Healthy salad recipe thatâ€™s big on nutrients and flavor", ["4 cups baby spinach", "2 tomatoes, chopped", "1 avocado, diced", "1 cucumber, peeled and sliced", "1/4 cup red onion, chopped", "2 tablespoon olive oil", "2 salmon filets", "salt and pepper, to taste"], ["LEMON VINAIGRETTE"]],
				["Ultimate Chicken Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2020/05/Chicken-Salad-3-500x500.jpg", "Chicken tossed with creamy textures", ["2 lb boneless skinless chicken breasts", "1/2 cup sliced almonds", "1 cup mayonnaise", "1 tablespoon dijon mustard", "1 cup red grapes, quartered", "2 stalk celery, diced", "3 green onions (green and white parts), sliced", "2 tablespoon chopped parsley", "1 tablespoon chopped tarragon", "1 lemon , juiced", "salt and pepper, to taste"], []],
				["Caprese Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2019/07/Caprese-Salad-2-500x500.jpg", "Keep it simple and tasty with this easy & classic Italian salad recipe", ["3 large tomatoes, sliced", "8 ounces mozzarella, sliced", "a handful of fresh basil leaves", "2 tbsp olive oil", "1 tbsp balsamic reduction (balsamic glaze)", "salt and pepper"], []],
				["Tuna Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2020/04/Tuna-Salad-3-500x500.jpg", "Tuna salad is a light and fresh comfort food classic", ["2 (5-ounce) cans tuna", "1/4 cup mayonnaise", "1 stalk of celery, diced", "2 tablespoons red onion, diced", "1-2 tablespoons chopped parsley, chives and/or other herbs", "1/2 tablespoons Dijon mustard", "salt and pepper, to taste"], []],
				["Greek Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2018/08/Greek-Salad-500x500.jpg", "This is easy to make and bursting with flavor", ["1 large cucumber, diced", "1 pint grape tomatoes, halved", "1 green bell pepper, diced", "1/2 red onion, thinly sliced", "1/2 cup Kalamata olives, halved", "4 ounces feta cheese, crumbled", "salt and pepper"], ["GREEK SALAD"]],
				["Mediterranean Chickpea Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2020/08/Mediterranean-Chickpea-Salad-4-500x500.jpg", "The ultimate summer salad", ["2 15-ounce cans chickpeas, drained and rinsed", "1 large cucumber, diced", "1 red bell pepper, diced", "2 cups cherry tomatoes, halved", "1/4 cup red onion, diced", "4 oz feta cheese, crumbled", "1/4 cup finely chopped parsley"], ["LEMON VINAIGRETTE"]],
				["Shrimp, Asparagus, & Avo Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2018/05/Shrimp-Asparagus-and-Avocado-Salad-Recipe-500x500.jpg", "Utterly delicious and perfect for spring", ["1 pound raw shrimp, peeled and deveined", "4 cups baby spinach", "1/4 cup fresh parsley, chopped", "20 spears asparagus, (1 bunch)", "1 avocado, sliced", "3 green onions, sliced", "salt and pepper, to taste"], ["LEMON VINAIGRETTE"]],
				["Cauliflower Rice Tabbouleh", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2017/06/cauliflower-rice-tabbouleh-18-450x450.jpg", "A tasty spin on traditional tabbouleh", ["1/2 medium head of cauliflower, riced (approx 4 cups)", "8 ounces cherry tomatoes, quartered", "1/2 cucumber, finely diced", "4 scallions, green onions, finely sliced", "2 cups fresh parsley, roughly chopped (approx 2 large bunches)", "1/3 cup fresh mint leaves, roughly chopped", "2 lemons, zested and juiced", "1/4 cup olive oil", "salt, to taste"], []],
				["Taco Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2020/06/Taco-Salad-6-500x500.jpg", "Loaded with crisp vegetables, ground beef, & taco classics", ["1 pound ground beef", "2 tablespoons taco seasoning", "salt and pepper, to taste", "1 head romaine lettuce or iceberg lettuce, chopped", "1 cup grape tomatoes, chopped", "1 cup black beans, drained and rinsed", "1 avocado, diced", "1/2 cup shredded cheese, optional", "1/2 cup salsa", "1/4 cup red onion, diced", "1/4 cup freshly chopped cilantro", "1 lime"], []],
				
				// ["Mandarin Chicken Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2014/09/Mandarin-Chicken-Salad-8.jpg", "Piled high with sweet mandarins, shredded chicken, avocado, crunchy toppings", ["2 chicken breasts, boneless and skinless", "5 cups spinach", "4 mandarins, peeled and separated", "1 avocado, ripe and diced", "1 cucumber, sliced", "2 green onions, chopped", "1/4 cup slivered almonds", "sprinkle of black and white sesame seeds"], ["LEMON VINAIGRETTE"]],
				// ["Southwest Chicken Salad", "https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2020/07/Southwest-Chicken-Salad-5.jpg", "Chicken breasts marinated in cilantro lime goodness", ["4 boneless skinless chicken breasts, approximately 6 ounces each", "3 tablespoon olive oil (divided)", "2 limes, juiced and zested", "1/4 cup chopped cilantro leaves", "3 cloves garlic, minced", "1 teaspoon ground cumin", "1/2 teaspoon chili powder", "1/2 teaspoon salt", "1/4 teaspoon black pepper", "4 cups romaine lettuce, chopped", "1 1/2 cup cherry tomatoes, halved", "1 cup black beans, rinsed and drained", "1 cup corn, rinsed and drained", "1/3 cup red onion, thinly sliced"], ["AVOCADO DRESSING"]]
			
			
			]

	var saladIngredients =[["broccoli", "florets", "bacon", "red onion", "cranberries", "sunflower seeds", "goat cheese", "mayonnaise", "plain yogurt"],
				["baby spinach", "tomatoes", "avocado", "cucumber", "red onion", "olive oil", "salmon filets", "salt and pepper", "olive oil", "lemon juice", "dijon mustard", "honey", "garlic cloves", "salt and pepper"],
				["chicken breasts", "sliced almonds", "mayonnaise", "dijon mustard", "red grapes", "celery", "green onions", "parsley", "tarragon", "lemon", "salt and pepper"],
				["large tomatoes", "mozzarella", "basil", "olive oil", "balsamic glaze", "salt and pepper"],
				["tuna", "mayonnaise", "celery", "red onion", "parsley", "dijon mustard", "salt and pepper"],
				["cucumber", "grape tomatoes", "green bell pepper", "red onion", "Kalamata olives", "feta cheese", "salt and pepper", "red wine vinegar", "lemon", "dijon mustard", "garlic cloves", "oregano", "salt", "black pepper", "olive oil"],
				["chickpeas", "cucumber", "red bell pepper", "cherry tomatoes", "red onion", "feta cheese", "parsley", "olive oil", "lemon juice", "dijon mustard", "honey", "garlic cloves", "salt and pepper"],
				["shrimp", "baby spinach", "fresh parsley", "asparagus", "avocado", "green onions", "salt and pepper", "olive oil", "lemon juice", "dijon mustard", "honey", "garlic cloves", "salt and pepper"],
				["cauliflower", "cherry tomatoes", "cucumber", "4 scallions", "parsley", "mint leaves", "lemons", "olive oil", "salt"],
				["ground beef", "taco seasoning", "salt and pepper", "romaine lettuce", "grape tomatoes", "black beans", "avocado", "shredded cheese", "salsa", "red onion", "cilantro", "lime"]];
	
	//{"Salad Name":[Step #1, #2, #3,...]}
	var instructionsDict = {"Broccoli Salad":["Preheat the oven to 400 degrees fahrenheit. Add the bacon slices to a parchment lined baking tray and cook for 15 minutes or until crispy. Remove the bacon from the oven and transfer to a paper towel to dry and cool.", "While the bacon is cooking, slice off all the broccoli florets and make sure they're in bite-sized pieces. Add them to a large mixing bowl along with the red onion, dried cranberries, sunflower seeds and goat cheese.", "To make the dressing, add the mayonnaise and yogurt to a small bowl and stir together. Add the dressing to the mixing bowl and stir until everything is well combined."],
						
				};
	
	var dressingsDict = {"BROCCOLI SALAD DRESSING":["1/2 cup mayonnaise", "1/4 cup plain yogurt"],
				"LEMON VINAIGRETTE":["1/3 cup olive oil", "1/4 cup lemon juice", "1 teaspoon Dijon mustard", "1/2 teaspoon honey, or maple syrup", "1-2 garlic cloves, minced", "salt and pepper, to taste"],
				"GREEK SALAD DRESSING":["1/3 cup red wine vinegar", "1 lemon, juiced", "1 tsp Dijon Mustard", "2 garlic cloves, minced", "1/2 tsp dried oregano", "1/4 tsp salt", "1/4 tsp black pepper", "1/2 cup olive oil"],
				"AVOCADO DRESSING":["1/2 large avocado", "1/4 cup olive oil", "1/4 cup water, or more for thinner consistency", "1/4 cup cilantro, basil or parsley leaves", "1 lime, juiced", "2 cloves garlic, minced", "salt and pepper, to taste"]
					};
	var similarityArray = [];
	// var checkedIngredients = JSON.parse(sessionStorage.checkedIngredients);
	checkedIngredients = ["baby spinach", "tomatoes", "avocado", "cucumber", "red onion", "olive oil", "salmon filets", "salt and pepper", "olive oil", "lemon juice", "dijon mustard", "honey"]
	saladName = "Salmon Avocado Salad"
    for (var i = 0; i < salads.length; i++) {
		//change saladName to sessionStorage.saladName
		//ToDo: compare to correct cap words/letters
		if (salads[i][0] != saladName) {
			var haveIngred = [];
			var neededIngred = [];
			for (var j = 0; j < saladIngredients[i].length; j++) {
				if (checkedIngredients.includes(saladIngredients[i][j])) {
					haveIngred.push(saladIngredients[i][j]);
				} else {
					neededIngred.push(saladIngredients[i][j]);
				}
			}
			similarityArray.push([salads[i], haveIngred, neededIngred]);
		}
	}
	
	similarityArray.sort(function(first, second) {
		return first[2].length - second[2].length;
	});

	function setStorageVal(index){
		sessionStorage.saladIngredients = JSON.stringify(similarityArray[index][0][3]);
		if (similarityArray[index][0][4].length == 0) {
			sessionStorage.dressingIngredients = JSON.stringify([]);
			sessionStorage.dressingName = "";
		} else {
			sessionStorage.dressingIngredients = JSON.stringify(dressingsDict[similarityArray[index][0][4]]);
			sessionStorage.dressingName = similarityArray[index][0][4];
		}
		sessionStorage.saladPicture = similarityArray[index][0][1];
		sessionStorage.saladName = similarityArray[index][0][0];
		sessionStorage.saladIngredientsNoMetrics = JSON.stringify(similarityArray[1]+similarityArray[2]);
		sessionStorage.checkedIngredients = similarityArray[1];
		//ToDo: make first letter of each ingred capitalized
	}

	for (var i = 0; i < similarityArray.length; i++) {
		$('<a href="/salidify/viewIngredients"onclick="setStorageVal('+i+')"><div class="card"><div class="row"><div class="col-5 align-self-center"><img src="'+similarityArray[i][0][1]+'"style="border-radius: 16px; width:100%; height:346px;"/></div><div class="col-7" style="padding-right: 0.5in; padding-top: 2.5%; padding-bottom: 2.5;"><div class="row" style="height: 40%; align-content:flex-end;"><div class="text" style="font-size: 48px; font-weight:600; font-family: Montserrat; color: #31A05E;">'+similarityArray[i][0][0]+'</div></div><hr width = "100%" color="#31A05E" size="1"><div class="row" style="height: 30%;"><div class="text" style="font-size: 28px; font-family: Montserrat;">'+similarityArray[i][0][2]+' <br> '+similarityArray[i][2].length+' addtional ingredients needed</div></div></div></div></div></a>').appendTo('.card-container');
	}

	// top looped-line example below
	// <div class="card">
	// 	<div class="row">
	// 		<div class="col-5 align-self-center">
	// 			<img src="https://i2.wp.com/www.downshiftology.com/wp-content/uploads/2019/09/Massaged-Kale-Salad-5.jpg"
	// 			style="border-radius: 16px; width:100%; height:346px;"/>
	// 		</div>
	// 		<div class="col-7" style="padding-right: 0.5in; padding-top: 2.5%; padding-bottom: 2.5;">
	// 			<div class="row" style="height: 40%; align-content:flex-end;">
	// 				<div class="text" style="font-size: 48px; font-weight:600; font-family: Montserrat; color: #31A05E;">Massaged Kale Salad</div>
	// 			</div>
	// 			<hr width = "100%" color="#31A05E" size="1">
	// 			<div class="row" style="height: 30%;">
	// 				<div class="text" style="font-size: 28px; font-family: Montserrat;">Simple yet surprisingly flavorful & nutrient dense <br> 6 Ingredients</div>
	// 			</div>
	// 		</div>
	// 	</div>
	// </div>
</script>
</html>






